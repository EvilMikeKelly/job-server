{% extends "base-tw.html" %}

{% load humanize %}

{% block metatitle %}{{ project.title }} | OpenSAFELY Jobs{% endblock metatitle %}

{% block breadcrumbs %}
  {% url "home" as home_url %}

  {% #breadcrumbs %}
    {% breadcrumb title="Home" url=home_url %}
    {% breadcrumb title=project.org.name url=project.org.get_absolute_url location="Organisation" %}
    {% breadcrumb title=project.title active=True location="Project" %}
  {% /breadcrumbs %}
{% endblock breadcrumbs %}

{% block content %}
  {% if project.slug == "opensafely-testing" %}
    {% #alert variant="warning" title="This is a test project" class="mb-6" %}
      This project exists for testing purposes only.
      More information can be found in the
      {% spaceless %}
        {% link text="OpenSAFELY testing policy" href="https://docs.opensafely.org/developer-access-policy/" %}
      {% endspaceless %}.
    {% /alert %}
  {% endif %}

  <div class="
    mb-6 mt-0 flex flex-col gap-4 text-center
    sm:mt-2 sm:flex-row sm:text-left
    md:mt-0 md:gap-6
  ">
    <div class="flex-shrink-0 flex flex-col items-center">
      {% if project.org.logo_file %}
        <img
          alt="{{ project.org.name }} logo"
          class="w-24 h-24 bg-white aspect-square rounded-2xl border border-slate-200 shadow-sm overflow-hidden flex-shrink-0 mt-1 mb-2"
          height="144"
          src="{{ project.org.logo_file.url }}"
          width="144"
        />
      {% endif %}
      <div>
        {% if project.status == "retired" %}
          {% pill sr_only="Status:" variant="warning" text=project.get_status_display %}
        {% elif project.status == "ongoing" %}
          {% pill sr_only="Status:" variant="primary" text=project.get_status_display %}
        {% elif project.status == "postponed" %}
          {% pill sr_only="Status:" variant="danger" text=project.get_status_display %}
        {% elif project.status == "completed" %}
          {% pill sr_only="Status:" variant="success" text=project.get_status_display %}
        {% endif %}
      </div>
    </div>
    <div class="flex-grow flex flex-col gap-y-4 sm:gap-y-2">
      <h1 class="text-3xl tracking-tight break-words sm:text-4xl font-bold text-slate-900">
        {{ project.name }}
      </h1>
      <div class="max-w-prose font-lg">
        <p class="text-slate-600">
          {% if project.description %}
            {{ project.description }}
          {% else %}
            {{ project.name }} is an OpenSAFELY project from
            {% spaceless %}
              {% link href=project.org.get_absolute_url text=project.org.name %}
            {% endspaceless %}. Every time a researcher runs their analytic
            code against patient data, it is audited in public here.
          {% endif %}
        </p>
      </div>
    </div>
  </div>
{% endblock %}
