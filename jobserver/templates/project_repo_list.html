{% extends "base.html" %}

{% block metatitle %}Repo: {{ repo.owner }}/{{ repo.name }} | OpenSAFELY Jobs{% endblock metatitle %}

{% block breadcrumbs %}
<nav class="breadcrumb-container" aria-label="breadcrumb">
  <div class="container">
    <ol class="breadcrumb rounded-0 mb-0 px-0">
      <li class="breadcrumb-item">
        <a href="/">Home</a>
      </li>

      <li class="breadcrumb-item active" aria-current="page">
        {{ repo.owner }}/{{ repo.name }}
      </li>
    </ol>
  </div>
</nav>
{% endblock breadcrumbs %}

{% block jumbotron %}
<div class="jumbotron jumbotron-fluid">
  <div class="container">
    <h1>Projects for the {{ repo.name }} repo</h1>
    {% if projects %}
    <p class="lead">
      Each project listed below has one or more workspaces using the
      <a href="{{ repo.url }}">{{ repo.name }}</a> repository.
    </p>
    {% endif %}
  </div>
</div>
{% endblock jumbotron %}

{% block content %}
<div class="container">

  {% if projects %}
  <div class="list-group">
    {% for project in projects %}
    <a href="{{ project.get_absolute_url }}" class="list-group-item list-group-item-action">
      {{ project.name }}
    </a>
    {% endfor %}
  </div>
  {% else %}
  <p>
    This code in the <a href="{{ repo.url }}">{{ repo.owner }}/{{ repo.name }}</a>
    repository has not yet been run on the OpenSAFELY platform.
  </p>

  <p>
    Once its code has been run on the platform you can reload this page and you
    will get redirected to the relevant project.
  </p>
  {% endif %}

</div>
{% endblock %}
