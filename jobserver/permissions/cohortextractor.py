# *******************
#   IMPORTANT NOTE  *
# *******************
#
# Only the IG team are authorised to make modifications to the list of projects below.
# Any PRs which update this list should be reviewed and approved by a member of the IG
# team so as to create the appropriate audit trail.
#
# Note also that this file is linked to in the documentation. If you move or restructure
# this file you should ensure the documentation is updated appropriately.
# https://github.com/opensafely/documentation/blob/af88baf1/docs/type-one-opt-outs.md


# Initial list taken from Appendix 3 of DPIA document linked here:
# https://digital.nhs.uk/about-nhs-digital/corporate-information-and-documents/directions-and-data-provision-notices/data-provision-notices-dpns/opensafely-covid-19-service-data-provision-notice

# Note that this is similar to, but not necessarily identical to, the list of projects
# with permission to access T1OO data.

PROJECTS_WITH_COHORT_EXTRACTOR_PERMISSION = {
    2,  # https://jobs.opensafely.org/online-consultations/
    4,  # https://jobs.opensafely.org/tncc-vaccine-efficacy/
    8,  # https://jobs.opensafely.org/germdefence/
    9,  # https://jobs.opensafely.org/impact-of-covid-19-on-long-term-healthcare-use-and-costs-in-children-and-young-people/
    11,  # https://jobs.opensafely.org/antidepressants/
    12,  # https://jobs.opensafely.org/investigating-events-following-sars-cov-2-infection/
    16,  # https://jobs.opensafely.org/brit-antibiotic-research/
    17,  # https://jobs.opensafely.org/effects-of-covid-19-on-people-with-diabetes/
    18,  # https://jobs.opensafely.org/managing-the-long-term-effects-of-covid-19-study/
    19,  # https://jobs.opensafely.org/evaluation-of-pandemic-associated-changes-in-bmi-and-metabolic-parameters/
    21,  # https://jobs.opensafely.org/direct-oral-anticoagulant-doac-prescribing-during-covid-19/
    22,  # https://jobs.opensafely.org/investigating-the-effectiveness-of-the-covid-19-vaccination-programme-in-the-uk/
    24,  # https://jobs.opensafely.org/24-incidence-of-mental-illness-following-coronavirus-infection-in-the-community/
    25,  # https://jobs.opensafely.org/tpp-representativeness/
    26,  # https://jobs.opensafely.org/uptake-of-nhs-at-home-interventions-during-covid-19/
    27,  # https://jobs.opensafely.org/the-effect-of-covid-19-on-pancreatic-cancer-diagnosis-and-care/
    28,  # https://jobs.opensafely.org/adtinjectables/
    29,  # https://jobs.opensafely.org/mainroute/
    30,  # https://jobs.opensafely.org/pathology-comparators-short-report/
    31,  # https://jobs.opensafely.org/long-covid-risk-factors/
    34,  # https://jobs.opensafely.org/deaths-at-home-during-covid-19/
    35,  # https://jobs.opensafely.org/impact-of-the-covid-19-pandemic-on-prevention-of-cardiovascular-disease/
    36,  # https://jobs.opensafely.org/impact-of-the-covid-19-pandemic-on-anticoagulation-for-atrial-fibrillation/
    57,  # https://jobs.opensafely.org/service-restoration-observatory/
    61,  # https://jobs.opensafely.org/covid-19-vaccine-effectiveness/
    65,  # https://jobs.opensafely.org/diabetes-test-levels/
    66,  # https://jobs.opensafely.org/pincer/
    67,  # https://jobs.opensafely.org/assessing-effectiveness-of-3rd-booster-covid-19-vaccine-doses-in-england/
    70,  # https://jobs.opensafely.org/lone-households-and-mental-health/
    71,  # https://jobs.opensafely.org/openprompt/
    75,  # https://jobs.opensafely.org/long-covid-symptoms/
    77,  # https://jobs.opensafely.org/investigating-the-impact-of-covid-19-on-childhood-immunisations-prototyping-a-dashboard/
    78,  # https://jobs.opensafely.org/long-term-kidney-outcomes-after-sars-cov-2-infection/
    84,  # https://jobs.opensafely.org/long-covid-19-sick-notes/
    85,  # https://jobs.opensafely.org/85-flucats/
    86,  # https://jobs.opensafely.org/impacts-of-healthcare-disruption-on-avoidable-hospitalisations/
    87,  # https://jobs.opensafely.org/validation-of-the-opensafely-kidney-codes/
    88,  # https://jobs.opensafely.org/88-reduced-kidney-function-dialysis-and-transplantation-on-c19-vaccination-efficacy/
    91,  # https://jobs.opensafely.org/coverage-effectiveness-and-safety-of-neutralising-monoclonal-antibodies-or-antivirals-for-non-hospitalised-patients-with-covid-19/
    92,  # https://jobs.opensafely.org/impact-of-covid-19-pandemic-on-services-for-people-with-asthma/
    93,  # https://jobs.opensafely.org/lockdown-and-vulnerable-groups/
    94,  # https://jobs.opensafely.org/postopcovid/
    95,  # https://jobs.opensafely.org/covid-19-collateral/
    97,  # https://jobs.opensafely.org/primary-care-covid-codes-research/
    99,  # https://jobs.opensafely.org/suicide-deaths-after-healthcare-contact-in-primary-care/
    100,  # https://jobs.opensafely.org/early-inflammatory-arthritis-during-covid-19/
    101,  # https://jobs.opensafely.org/indians-in-india-and-the-uk/
    102,  # https://jobs.opensafely.org/covid-19-antimicrobial-stewardship/
    103,  # https://jobs.opensafely.org/covid-symptom-study-biobank-long-covid/
    104,  # https://jobs.opensafely.org/predictors-of-asymptomatic-versus-symptomatic-infection-with-sars-cov-2/
    105,  # https://jobs.opensafely.org/antidepressant-learning-disability-and-autism/
    106,  # https://jobs.opensafely.org/effectiveness-safety-sotrovimab-molnupiravir/
    108,  # https://jobs.opensafely.org/hepatitis-in-children-related-to-the-pandemic/
    110,  # https://jobs.opensafely.org/covid-19-vaccine-coverage-and-effectiveness-in-chronic-kidney-disease-patients/
    112,  # https://jobs.opensafely.org/112-coronavirus-pandemic-on-rheumatoid-arthritis-care-and-non-covid-outcomes/
    113,  # https://jobs.opensafely.org/113-shared-care-monitoring-the-impact-of-covid-19-and-factors-associated-with-resilience/
    114,  # https://jobs.opensafely.org/ethnicity-short-data-report/
    115,  # https://jobs.opensafely.org/115-effectiveness-of-sotrovimabmolnupiravir-use-vs-non-use/
    116,  # https://jobs.opensafely.org/further-analysis-of-doac-prescribing-for-patients-with-mechanical-heart-valves/
    117,  # https://jobs.opensafely.org/understanding-and-adjusting-for-bias-in-opensafely-covid-testing-data/
    118,  # https://jobs.opensafely.org/expected-background-rates-of-clinical-events-in-immunocompromised-patients/
    119,  # https://jobs.opensafely.org/the-healthcare-utilisation-of-people-with-long-covid-openprompt/
    120,  # https://jobs.opensafely.org/long-term-kidney-outcomes-following-hospitalisation-with-covid-19/
    121,  # https://jobs.opensafely.org/phosp-mental-health/
    122,  # https://jobs.opensafely.org/opioid-prescribing-trends-and-changes-during-covid-19/
    125,  # https://jobs.opensafely.org/what-was-the-impact-of-the-covid-19-pandemic-on-medication-reviews/
    126,  # https://jobs.opensafely.org/antipsychotics-prescribing-during-covid-19/
    127,  # https://jobs.opensafely.org/prostate-cancer-incidence-and-prevalence-in-the-covid-19-pandemic/
    128,  # https://jobs.opensafely.org/the-effect-of-covid-19-infection-and-vaccination-on-psa-levels-in-men/
    129,  # https://jobs.opensafely.org/curation-of-gp-appointments-data-short-data-report/
    130,  # https://jobs.opensafely.org/surveillance-of-psychiatric-emergencies-over-time-to-investigate-the-effect-of-covid-19-on-mental-health-a-cohort-study-using-opensafely/
    131,  # https://jobs.opensafely.org/sle-and-covid-19/
    132,  # https://jobs.opensafely.org/assessing-the-impact-of-covid-19-on-qof-registered-patients-and-health-groups-that-experience-inequalities/
    133,  # https://jobs.opensafely.org/effect-of-covid-19-on-prescribing-of-dependence-forming-medicines-and-the-associated-health-utilisation/
    134,  # https://jobs.opensafely.org/impact-of-covid-19-in-people-with-chronic-lymphocytic-leukaemia/
    135,  # https://jobs.opensafely.org/impact-of-covid-19-on-diabetes-care-in-england/
    136,  # https://jobs.opensafely.org/gp-appointments-during-covid/
    137,  # https://jobs.opensafely.org/healthcare-needs-for-people-with-chronic-kidney-disease-in-the-covid-19-era/
    138,  # https://jobs.opensafely.org/hypertension-and-blood-pressure-in-the-quality-and-outcomes-framework-qof/
    139,  # https://jobs.opensafely.org/risk-factors-for-covid-19-disease-progression-in-immunocompromised-populations/
    140,  # https://jobs.opensafely.org/incidence-and-management-of-gout-during-and-before-the-covid-19-pandemic/
    141,  # https://jobs.opensafely.org/the-impact-of-covid-19-on-the-care-of-people-with-sickle-cell-disease/
    142,  # https://jobs.opensafely.org/the-impact-of-covid-19-on-prescribing-of-antimicrobials/
    143,  # https://jobs.opensafely.org/comparison-of-risk-factors-for-hospitalizations-and-death-from-winter-infections/
    144,  # https://jobs.opensafely.org/covid-19-impact-on-anastrazole-use-by-post-menopausal-women-with-hormone-dependent-breast-cancer/
    145,  # https://jobs.opensafely.org/association-between-ursodeoxycholic-acid-and-covid-19-outcomes/
    146,  # https://jobs.opensafely.org/scarlet-fever-and-invasive-group-a-strep-cases-during-the-covid-19-pandemic/
    147,  # https://jobs.opensafely.org/winter-pressures-in-primary-care-in-the-context-of-covid-19-recovery/
    148,  # https://jobs.opensafely.org/the-impact-of-covid-19-on-pregnancy-treatment-pathways-and-outcomes/
    149,  # https://jobs.opensafely.org/descriptive-cohort-analysis-of-long-covid-and-vaccination-status/
    150,  # https://jobs.opensafely.org/evaluating-the-uk-shielding-policy-during-the-covid-19-pandemic/
    151,  # https://jobs.opensafely.org/venous-thromboembolism-and-cardiovascular-events-in-inflammatory-rheumatic-diseases/
    152,  # https://jobs.opensafely.org/digital-access-to-primary-care-for-older-people-during-covid/
    153,  # https://jobs.opensafely.org/what-was-the-impact-of-covid-19-on-mortality-related-to-venous-thromboembolism-in-england/
    154,  # https://jobs.opensafely.org/validation-of-isaric-sus-phosp-data-for-covid-related-hospital-admissions/
    155,  # https://jobs.opensafely.org/the-effect-of-long-covid-on-quality-adjusted-life-years-using-openprompt/
    171,  # This is a continuation of 137.  See https://bennettoxford.slack.com/archives/C068NDYALSF/p1723466360078629 for approval.
}


def project_is_permitted_to_use_cohortextractor(project):
    if project.pk == 28:  # This is the opensafely-internal project
        return True
    return project.number in PROJECTS_WITH_COHORT_EXTRACTOR_PERMISSION
